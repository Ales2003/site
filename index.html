<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<body>

<h1>This is a Heading</h1>
<p>This is a paragraph.</p>





<iframe src="http://alex-vishneuski-developer-edition.ap4.force.com/" title="Salesforce Sites Iframe" width="50%" height="300"> 

    <p>Your browser does not support iframes.</p>

    <form>
      First name:<br>
      <input id = "lastname" type="text" name="lastname"><br>
      Last name:<br>
      <input id = "company" type="text" name="company">
      <input type="button" value="Create Lead" onclick="createLead();"/> 
    </form>


</iframe>

<script>

    function createLead() { 

        const data = JSON.stringify({

           "lastname": document.getElementById("lastname").value,

           "company": document.getElementById("company").value

        });

        const url = "http://alex-vishneuski-developer-edition.ap4.force.com/services/apexrest/newlead";

        const xhr = new XMLHttpRequest();

        xhr.onload = function() {
            if (xhr.status != 200) { // анализируем HTTP-статус ответа, если статус не 200, то произошла ошибка
                alert(`Ошибка ${xhr.status}: ${xhr.statusText}`); // Например, 404: Not Found
            } else { // если всё прошло гладко, выводим результат
                alert(`Готово, получили ${xhr.response.length} байт`); // response -- это ответ сервера
            }
        };

        xhr.open("POST", url, true); 

        xhr.setRequestHeader("content-type", "application/json; charset=UTF-8");

        xhr.setRequestHeader("accept", "application/json");

        xhr.send(data);

    }

</script>

</body>
</html>
